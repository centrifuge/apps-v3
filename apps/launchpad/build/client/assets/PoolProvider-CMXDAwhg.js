import{a as e,x as $,p as D}from"./chunk-NL6KNZEE-BfjKGAAH.js";import{bQ as d,b8 as f,be as V,bF as j,bR as A}from"./Toaster-DVn7MaYc.js";import{a as R,u as S}from"./useAccount-BmcfKMoq.js";function g(n){return n.state.chainId}function y(n,t){const{onChange:o}=t;return n.subscribe(s=>s.chainId,o)}function z(n={}){const t=R(n);return e.useSyncExternalStore(o=>y(t,{onChange:o}),()=>g(t),()=>g(t))}function F(n,t){const o=e.useMemo(()=>n&&t?n.vaults(t):void 0,[n,t]);return d(o)}function O(n){const t=e.useMemo(()=>{if(!n||n.length===0)return;const o=n.map(s=>s.details());return f(o)},[n]);return d(t)}function Q(n){const{address:t}=S(),o=e.useMemo(()=>{if(!n||n.length===0||!t)return;const s=n.map(u=>u.investment(t));return f(s)},[n,t]);return d(o)}const P=e.createContext(void 0);function H({children:n}){var v;const o=$().poolId,s=z(),u=e.useMemo(()=>o?new V(o):void 0,[o]),{data:a,isLoading:I,error:h}=j(u),{data:i,isLoading:L}=A(a==null?void 0:a.id),l=e.useMemo(()=>i==null?void 0:i.find(M=>M.chainId===s),[i,s]),r=(v=a==null?void 0:a.shareClasses)==null?void 0:v[0],m=r==null?void 0:r.details.id,{data:c,isLoading:x}=F(l,m),{data:b,isLoading:p}=O(c),{data:C,isLoading:w}=Q(c),E={poolDetails:a,networks:i,network:l,shareClass:r,scId:m,vaults:c,vaultsDetails:b,allInvestments:C,isLoading:I||L||x||p||w,error:h};return D.jsx(P.Provider,{value:E,children:n})}function J(){const n=e.useContext(P);if(n===void 0)throw new Error("usePool must be used within a PoolProvider");return n}export{H as P,J as u};
